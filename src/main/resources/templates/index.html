<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Stuff</title>

<link data-th-href="@{/webjars/bootstrap/css/bootstrap.min.css}"
  rel="stylesheet">
<script data-th-src="@{/webjars/jquery/jquery.min.js}"></script>

</head>
<body>

  <div class="container">
    <h2>Before</h2>
    <div class="row">
      <table id="stuff" class="table table-striped">
        <tbody id="greetings">
        </tbody>
      </table>
    </div>
    <p>After</p>
  </div>

  <th:block data-th-each="greeting,status: ${greetings}">
    <script data-th-id="|foo-${status.index}|" type="text/html"
      data-th-include="~{message}">
</script>
    <script>
          $("#greetings").append($("#foo-[[${status.index}]]").html())
        </script>
  </th:block>
</body>
</html>